<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>防災クイズ</title>
    <meta name="description" content="正誤画面" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="icon" href="/favicon.png" />
    <meta property="og:site_name" content="a防災クイズ" />
    <meta property="og:url" content="URL" />
    <meta property="og:type" content="website or article" />
    <meta property="og:title" content="正誤画面" />
    <meta property="og:description" content="タイトル" />
    <meta property="og:image" content="URL" />
    <meta property="og:locale" content="ja_JP" />
    <link rel="stylesheet" href="result1.css" />

    <!-- favicon/webclipicon -->
    <link rel="icon" href="img/favicon.png" />

    <!-- アドビフォント -->
    <script>
      (function(d) {
        var config = { kitId: 'hnx0kbj', scriptTimeout: 3000, async: true },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),
            tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;
        h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';
        tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
      })(document);
    </script>
  </head>
  <body>
    <div class="header">
      <img class="logo" src="img/logo.png" alt="logo">
    </div>

    <div class="content">
      <div class="explainbox" id="resultBox">
        <!-- JSで内容を差し込む -->
      </div>
    </div>

    <div class="botton">
      <button type="button" class="nextbutton" id="nextBtn">NEXT</button>
    </div>

    <div class="footer">
      <div class="tokan"><p>©tokan18</p></div>
    </div>

    <script>
      const box = document.getElementById("resultBox");
      const nextBtn = document.getElementById("nextBtn");

      const lastCorrect = localStorage.getItem("lastCorrect") === "1";
      const explain = localStorage.getItem("lastExplain") || "";
      const idx = Number(localStorage.getItem("quizIdx") || "0");
      const score = Number(localStorage.getItem("quizScore") || "0");
      const total = 10; // 問題数（index.jsと合わせる）

      function render() {
        // 全問終了のとき
        if (idx >= total) {
            window.location.href = "sum.html";
          return;
        }

        // 途中問題の正誤表示
        box.innerHTML = `
          <p>正解は ${lastCorrect ? "⭕️ まる" : "❌ ばつ"} でした</p>
          <p>${explain}</p>
        `;
        nextBtn.textContent = "NEXT";
        nextBtn.onclick = () => window.location.href = "question.html";
      }
      render();
    </script>
  </body>
</html>
